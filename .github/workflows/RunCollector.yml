# This workflow will build a .NET project
# For more information see: https://docs.github.com/en/actions/automating-builds-and-tests/building-and-testing-net

name: Run ProxyCollector

on:
  workflow_dispatch:
  schedule:
    - cron: '0 12 * * *'

jobs:

  run:
    permissions: write-all
    runs-on: ubuntu-latest
    env:
      GithubApiToken: ${{ secrets.GITHUB_TOKEN }}
      GithubUser: ${{ github.repository_owner }}
      GithubRepo: ProxyCollector
      Timeout: 5000
      MaxThreadCount: 96
      SingboxPath: sing-box
      V2rayFormatResultPath: sub/proxies.txt
      SingboxFormatResultPath: sub/singbox.json
      Sources: |
        https://raw.githubusercontent.com/MrMohebi/xray-proxy-grabber-telegram/master/collected-proxies/row-url/all.txt
        https://raw.githubusercontent.com/Mohammadgb0078/IRV2ray/main/vless.txt
        https://raw.githubusercontent.com/hsb4657/v2ray/main/lastest.txt
        https://raw.githubusercontent.com/ermaozi/get_subscribe/main/subscribe/v2ray.txt
        https://raw.githubusercontent.com/Barabama/FreeNodes/master/nodes/yudou66.txt
        https://raw.githubusercontent.com/mahsanet/MahsaFreeConfig/main/mci/sub_1.txt
        https://raw.githubusercontent.com/Kwinshadow/TelegramV2rayCollector/main/sublinks/mix.txt
        https://raw.githubusercontent.com/Mahanfix/v2rayvpn/main/mahanfix
        https://raw.githubusercontent.com/Mr8AHAL/v2ray/main/SERVER.txt
        https://raw.githubusercontent.com/Pawdroid/Free-servers/main/sub
        https://raw.githubusercontent.com/Surfboardv2ray/Subs/main/Raw
        https://raw.githubusercontent.com/aiboboxx/v2rayfree/main/v2
        https://raw.githubusercontent.com/imohammadkhalili/V2RAY/main/Mkhalili
        https://raw.githubusercontent.com/LonUp/NodeList/main/V2RAY/Latest_base64.txt
        https://raw.githubusercontent.com/YasserDivaR/pr0xy/main/ShadowSocks2021.txt
        https://raw.githubusercontent.com/ermaozi01/free_clash_vpn/main/subscribe/v2ray.txt
        https://raw.githubusercontent.com/gitbigg/dy/main/jd
        https://raw.githubusercontent.com/Mohammadgb0078/IRV2ray/main/vmess.txt
        https://raw.githubusercontent.com/ripaojiedian/freenode/main/sub
        https://raw.githubusercontent.com/peasoft/NoMoreWalls/master/list.txt
        https://raw.githubusercontent.com/hkaa0/permalink/main/proxy/V2ray.txt
        https://raw.githubusercontent.com/dalazhi/v2ray/main/v2ray%E8%AE%A2%E9%98%85
        https://raw.githubusercontent.com/mahsanet/MahsaFreeConfig/main/mtn/sub_4.txt
        https://raw.githubusercontent.com/dalazhi/v2ray/main/v2ray订阅
        https://raw.githubusercontent.com/Surfboardv2ray/Proxy-sorter/main/output/converted.txt
        https://raw.githubusercontent.com/GozargahAzadi/config/main/worker
        https://raw.githubusercontent.com/vxiaov/free_proxies/main/links.txt
        https://raw.githubusercontent.com/amin4139/share_file/main/Fastly_ConfigTestV2rayNG
        https://raw.githubusercontent.com/freefq/free/master/v2
        https://raw.githubusercontent.com/mahsanet/MahsaFreeConfig/main/mci/sub_3.txt
        https://raw.githubusercontent.com/mahsanet/MahsaFreeConfig/main/mci/sub_4.txt
        https://raw.githubusercontent.com/Strongmiao168/v2ray/main/yuanheng
        https://raw.githubusercontent.com/lflflf999/0516/main/BX-JD
        https://raw.githubusercontent.com/kaoxindalao/v2raycheshi/main/v2raycheshi
        https://raw.githubusercontent.com/chongdong1230/dxz/main/v2ray
        https://raw.githubusercontent.com/mahsanet/MahsaFreeConfig/main/mci/sub_2.txt
        https://raw.githubusercontent.com/mfuu/v2ray/master/v2ray
        https://raw.githubusercontent.com/resasanian/Mirza/main/sub
        https://raw.githubusercontent.com/miladtahanian/V2RayCFGDumper/main/config.txt
        https://raw.githubusercontent.com/GozargahAzadi/config/main/cdn
        https://raw.githubusercontent.com/mahsanet/MahsaFreeConfig/main/mtn/sub_3.txt
        https://raw.githubusercontent.com/theGreatPeter/v2rayNodes/main/nodes.txt
        https://raw.githubusercontent.com/mahsanet/MahsaFreeConfig/main/mtn/sub_1.txt
        https://raw.githubusercontent.com/roosterkid/openproxylist/main/V2RAY_BASE64.txt
        https://raw.githubusercontent.com/yaney01/Yaney01/main/temporary
        https://raw.githubusercontent.com/mahsanet/MahsaFreeConfig/main/mtn/sub_2.txt
        https://raw.githubusercontent.com/ALIILAPRO/v2rayNG-Config/main/server.txt
        https://raw.githubusercontent.com/AzadNetCH/Clash/main/AzadNet_iOS.txt
        https://raw.githubusercontent.com/MhdiTaheri/V2rayCollector_Py/main/sub/Mix/mix.txt
        https://raw.githubusercontent.com/Vauth/node/main/Main
        https://raw.githubusercontent.com/mahdibland/V2RayAggregator/master/sub/sub_merge.txt
        https://raw.githubusercontent.com/barry-far/V2ray-Configs/main/All_Configs_Sub.txt
        https://raw.githubusercontent.com/hkpc/V2ray-Configs/main/All_Configs_Sub.txt
        https://raw.githubusercontent.com/soroushmirzaei/telegram-configs-collector/main/splitted/mixed
        https://raw.githubusercontent.com/Surfboardv2ray/TGParse/main/splitted/mixed
        https://raw.githubusercontent.com/mheidari98/.proxy/main/all
        https://raw.githubusercontent.com/v2clash/V2ray-Configs/main/All_Configs_Sub.txt
        https://raw.githubusercontent.com/LalatinaHub/Mineral/master/result/nodes
        https://shadowmere.xyz/api/b64sub/
        https://raw.githubusercontent.com/SoliSpirit/v2ray-configs/refs/heads/main/all_configs.txt
        https://raw.githubusercontent.com/Epodonios/v2ray-configs/refs/heads/main/All_Configs_Sub.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/1.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/2.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/3.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/4.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/5.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/6.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/7.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/8.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/9.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/10.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/11.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/12.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/13.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/14.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/15.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/16.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/17.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/18.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/19.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/20.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/21.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/22.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/23.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/24.txt
        https://raw.githubusercontent.com/AvenCores/goida-vpn-configs/refs/heads/main/githubmirror/25.txt
        https://raw.githubusercontent.com/aqayerez/MatnOfficial-VPN/refs/heads/main/MatnOfficial
        https://raw.githubusercontent.com/STR97/STRUGOV/refs/heads/main/STR.BYPASS
        https://raw.githubusercontent.com/itsyebekhe/PSG/refs/heads/main/subscriptions/xray/base64/mix
        https://raw.githubusercontent.com/MatinGhanbari/v2ray-configs/main/subscriptions/v2ray/all_sub.txt
        https://raw.githubusercontent.com/V2RayRoot/V2RayConfig/refs/heads/main/Config/vless.txt
        https://raw.githubusercontent.com/V2RayRoot/V2RayConfig/refs/heads/main/Config/vmess.txt
        https://raw.githubusercontent.com/V2RayRoot/V2RayConfig/refs/heads/main/Config/shadowsocks.txt
        https://raw.githubusercontent.com/lagzian/SS-Collector/main/SS_B64.txt
        https://raw.githubusercontent.com/lagzian/SS-Collector/main/vmess_B64.txt
        https://raw.githubusercontent.com/lagzian/SS-Collector/main/reality_B64.txt
        https://raw.githubusercontent.com/lagzian/SS-Collector/main/vmess_B64_tvc.txt
        https://raw.githubusercontent.com/lagzian/SS-Collector/refs/heads/main/VLESS/VL100.txt
        https://raw.githubusercontent.com/lagzian/SS-Collector/main/backup_B64.txt
        https://raw.githubusercontent.com/ebrasha/free-v2ray-public-list/refs/heads/main/all_extracted_configs.txt
        https://raw.githubusercontent.com/AliDev-ir/FreeVPN/main/pcvpn
        https://raw.githubusercontent.com/Joker-funland/V2ray-configs/main/config.txt
        https://raw.githubusercontent.com/SANYIMOE/VPN-free/4cf1dfd9e9b1f612a60f8796f43ea17f2bca0727/conf/data.txt
        https://raw.githubusercontent.com/SANYIMOE/VPN-free/5b5c8c09aa665169692ffcb48fed7c786bf0e737/conf/data.txt
        https://raw.githubusercontent.com/SANYIMOE/VPN-free/bfd7d84e84ef6fbbd89352dea17fdbcb8ac3e29a/conf/data.txt
        https://raw.githubusercontent.com/SANYIMOE/VPN-free/9ecbfd0efd89256e136f7b8c4558dc94fe1905af/conf/data.txt
        https://raw.githubusercontent.com/SANYIMOE/VPN-free/6e93041767a76c3104062551b003f29ea55f584e/conf/data.txt
        https://raw.githubusercontent.com/gfpcom/free-proxy-list/main/list/vless.txt
        https://raw.githubusercontent.com/gfpcom/free-proxy-list/main/list/trojan.txt
        https://raw.githubusercontent.com/gfpcom/free-proxy-list/main/list/vmess.txt
        https://raw.githubusercontent.com/youfoundamin/V2rayCollector/main/ss_iran.txt
        https://raw.githubusercontent.com/youfoundamin/V2rayCollector/main/mixed_iran.txt
        https://raw.githubusercontent.com/youfoundamin/V2rayCollector/main/vmess_iran.txt
        https://raw.githubusercontent.com/youfoundamin/V2rayCollector/main/vless_iran.txt
        https://raw.githubusercontent.com/youfoundamin/V2rayCollector/main/trojan_iran.txt
        https://raw.githubusercontent.com/Ashkan-m/v2ray/refs/heads/main/Sub.txt
        https://raw.githubusercontent.com/MrPooyaX/SansorchiFucker/refs/heads/main/data.txt
        https://raw.githubusercontent.com/MrPooyaX/VpnsFucking/refs/heads/main/BeVpn.txt
        https://raw.githubusercontent.com/MrPooyaX/VpnsFucking/refs/heads/main/Shenzo.txt
        https://raw.githubusercontent.com/MrPooyaX/VpnsFucking/main/Shenzo.txt
        https://raw.githubusercontent.com/SamanValipour1/My-v2ray-configs/refs/heads/main/MySub.txt
        https://raw.githubusercontent.com/sansorchi/sansorchi/refs/heads/main/data.txt
        https://raw.githubusercontent.com/hotsymbol/vpnsetting/master/v2rayopen
        https://raw.githubusercontent.com/parsashonam/v2ray/main/all
        https://raw.githubusercontent.com/Tenerome/v2ray/main/vmess.txt
        https://raw.githubusercontent.com/Jia-Pingwa/free-v2ray-merge/main/output.txt
        https://raw.githubusercontent.com/Jason05211211/Freerocket/main/freessr
        https://raw.githubusercontent.com/245237866/v2rayn/main/everydaynode
        https://raw.githubusercontent.com/w1770946466/Auto_proxy/main/Long_term_subscription2
        https://raw.githubusercontent.com/iboxz/free-v2ray-collector/main/main/vless
        https://raw.githubusercontent.com/vpei/free-node-1/refs/heads/main/res/nod-0.txt
        https://raw.githubusercontent.com/vpei/free-node-1/refs/heads/main/res/nod-1.txt
        https://raw.githubusercontent.com/vpei/free-node-1/refs/heads/main/res/nod-2.txt
        https://raw.githubusercontent.com/vpei/free-node-1/refs/heads/main/res/nod-3.txt
        https://raw.githubusercontent.com/vpei/free-node-1/refs/heads/main/res/nod-4.txt
        https://raw.githubusercontent.com/vpei/free-node-1/refs/heads/main/res/nod-5.txt
        https://raw.githubusercontent.com/vpei/free-node-1/refs/heads/main/res/nod-6.txt
        https://raw.githubusercontent.com/vpei/free-node-1/refs/heads/main/res/nod-7.txt
        https://raw.githubusercontent.com/vpei/free-node-1/refs/heads/main/res/nod-8.txt
        https://raw.githubusercontent.com/vpei/free-node-1/refs/heads/main/res/nod-9.txt
        
    steps:
    - uses: actions/checkout@v4
    - name: Setup .NET
      uses: actions/setup-dotnet@v4
      with:
        dotnet-version: 9.x
    - name: Install sing-box
      run: |
        curl -fsSLO https://github.com/SagerNet/sing-box/releases/download/v1.10.6/sing-box_1.10.6_linux_amd64.deb
        sudo dpkg -i sing-box_1.10.6_linux_amd64.deb
        sudo apt-get install -f
    - name: Restore dependencies
      run: dotnet restore
    - name: Run
      run: dotnet run --configuration Release --project ProxyCollector
